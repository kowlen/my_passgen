<html>
<!--
	v.2.2.
	-Удалена линия соединения частей речи
	-Добавлена панель управления
	!тумблеры для edge
	!кнопка сброса настроек для edge
	!функция отзывов
	!адаптировать для 4:3
	!подсвечивать спецсимволы
	!уникальные посещения
-->
	<head>
		 <meta charset="utf-8">
		 <title>Генератор паролей</title>
		<link rel="SHORTCUT ICON" href="img/fav.ico" type="image/x-icon">
    	<script type="text/javascript"></script>
    	<script src="generator/generator.php"></script>
    	<script src="./js/actions.js"></script>
    	<script src="./js/jquery.min.js"></script>
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  		<script src="./js/jquery-ui.js"></script>
  		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  		<link href="./css/jquery-ui.css" rel="stylesheet" type="text/css"/>
  		<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
		<link rel="stylesheet" type="text/css" href="./css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="./css/style.css">
		<link rel="stylesheet" type="text/css" href="./css/all.css">
		<script defer src="./js/all.js"></script>
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
		<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
		<script src="./js/popper.min.js"></script>
		<script src="./js/bootstrap.min.js"></script>

		<script type="text/javascript"> 
		/*подключение jquery слайдера*/
		  $( function() {
		    var select = $( "#height_opt" );
		    var slider = $( "<div id='slider'></div>" ).insertAfter( select ).slider({
		      min: 12,
		      max: 30,
		      range: "min",
		      value: select[ 0 ].value ,
		      slide: function( event, ui ) {
		        select[ 0 ].value = ui.value;
		        localStorage.setItem('PasswordLength', $('#height_opt').val());
		      }
		    });
		    $( "#height_opt" ).on( "change", function() {
		      slider.slider( "value", this.value );
		    });
		  });
		</script>
		<style>
			/* <--Слайдер--> */
			.ui-widget-content { 
				widows: 10%;
			  background: #FFFFFF;
			  box-shadow:  rgba(0,0,0, .2);
			  box-shadow: inset 0 0 11px rgba(0,0,0, .2);
			  border: none !important;
			  margin-top: 43px;
			}
			.ui-slider-handle {
			width: 23px !important;
			height: 23px !important;
			-webkit-border-radius: 15px 15px 15px 15px !important;
			background: -webkit-linear-gradient(top, #FFFFFF, #FFFFFF) !important;
			border: none !important;
			top: 50% !important;
			margin-top: -10.9px !important;
			margin-left: -15px !important;
			box-shadow: 0 0 10px rgba(0,0,0,0.5);
			cursor: pointer !important;
			outline: none !important;
			transition: 0.1s;
			}

			.ui-widget-header { 
			  border: 1px solid #7F2929;
			  background: #7F2929;
			transition: 0.1s;
			}

			#slider {
			  width: 97%;
			}
			/* <--Слайдер--> */
		</style>
	</head>
	<style>

	</style>
	<body>
		<div class="body">
		<div class="content">
			<div class="head">
				<div class="logo">
					<img src="" height="55" width="126" alt="">
				</div>
				<div class="head_name">
					Генератор паролей на основе словосочетаний
				</div>
				<hr>
				<br>
				<div class="generator">
				<div class="g_input">
				<div class="input-group">
				<input type="text" class="form-control popover-control" data-trigger="focus" placeholder="Сгенерированный пароль" id="password" readonly="" onclick="this.select();"  aria-describedby="basic-addon2" data-container="body" data-toggle="popover" data-placement="left" data-content="Пароль скопирован в буфер обмена! Не забудьте переключить раскладку клавиатуры на 'ENG'" >
				<div class="input-group-append">
				<button class="btn btn-outline-secondary" type="button" id="btn_refresh"   onclick="$('#btn_copy, #btn_copy_2').removeAttr('disabled');" title="Сгенерировать новый пароль"><i id="icon_refresh" class="fas fa-sync-alt fa-2x" ></i></button>
				<button class="btn btn-outline-secondary copy"  id="btn_copy" data-clipboard-action="copy" disabled data-clipboard-target="#password"  type="button" title="Скопировать пароль в буфер обмена" ><i class="fas fa-clone fa-2x" aria-hidden="true" ></i></button>
				</div>
				</div>
				</div>
			</div>
				<br>
		<div class="opts_headline">
			<hr>
			<center><span class="opts_headline">Настройки генерирования</span>&nbsp;<i id="reset" data-toggle="tooltip" data-placement="top" title="Сбросить настройки" style="cursor:pointer" ><i class="fas fa-redo-alt fa-flip-horizontal" style="font-size:12pt"></i></i></center>
			<hr>
			</div>
			<div class="options">
				<div class="words_options">
						<div class="words_status"><center><span class="opts_headlines"><i  data-toggle="tooltip" data-placement="top" title="Части речи, слова которых будут находится в пароле" style="cursor:pointer">
						  <i  class="fa fa-question-circle" style="font-size:12pt;"></i>
						</i>Словосочетание: </span><br><span id="word_combination"></center><br>
					<div class="w_option_left">
					<label>
					  <input type="checkbox"   name="rand" value="l_dict=dict"  style="display:none"/>
					  <span class="word_opt">случайное</span>
					</label>
					<br><br>
				    <label>
				  <input type="checkbox" id="word_rand_l" name="noun" value="l_dict=noun" checked style="display:none"/>
				  <span class="word_opt">существительное</span>
				</label>
				<br><br>
				    <label>
				  <input type="checkbox" name="adject" value="l_dict=adjf" style="display:none"/>
				  <span class="word_opt">прилагательное</span>
				</label>
				<br><br>
				    <label>
				  <input type="checkbox" name="verb" value="l_dict=verb" style="display:none"/>
				  <span class="word_opt">глагол</span>
				</label>
				<br><br>
				  </div>
				  <div class="w_option_right">
				    <label>
				  <input type="checkbox"  name="dict" value="r_dict=dict"  style="display:none"/>
				  <span class="word_opt">случайное</span>
				</label>
				<br><br>
				    <label>
				  <input type="checkbox" name="noun" value="r_dict=noun" style="display:none"/>
				  <span class="word_opt">существительное</span>
				</label>
				<br><br>
				    <label>
				  <input type="checkbox" id="word_rand_r" name="adject" checked value="r_dict=adjf" style="display:none"/>
				  <span class="word_opt">прилагательное</span>
				</label>
				<br><br>
				    <label>
				  <input type="checkbox" name="verb" value="r_dict=verb" style="display:none"/>
				  <span class="word_opt">глагол</span>
				</label>
				</div>
			</div>
				</div>
				<div class="items_options">
					<center style="margin-top:16px;"><span class="opts_headlines" >Элементы пароля</span></center><br>
							<div class="i_opt_l" style="margin-top:13.5px;">
						  	<input class="item_opt" type="checkbox" id="item_opt_low_let"  checked disabled  title="Отключение этой настройки приведет к генерированию пароля, несоответствующего политике безопасности"> Прописные буквы</input> <br><br>
						  <input class="item_opt" type="checkbox" id="item_opt_up_let" checked disabled title="Отключение этой настройки приведет к генерированию пароля, несоответствующего политике безопасности"> Заглавные буквы</input><br><br>
						  <input class="item_opt" type="checkbox" id="item_opt_num" checked disabled title="Отключение этой настройки приведет к генерированию пароля, несоответствующего политике безопасности"> Цифры</input><br><br>
						  <input class="item_opt" type="checkbox" id="item_opt_symb" checked disabled title="Отключение этой настройки приведет к генерированию пароля, несоответствующего политике безопасности"> Символы</input><br><br>
							</div>
							<div class="i_opt_r" style="margin-top:13.5px;">
					    <input class="item_opt" type="checkbox" id="item_opt_sim"  > Исключать похожие<i  data-toggle="tooltip" style="cursor:pointer" data-placement="top" title="Похожие символы B8 G6 I1l| 0OQD S5 Z2">
						  <i  class="fa fa-question-circle"></i>
						</i><br><br>
						 <input class="item_opt" type="checkbox" id="item_opt_light" value="1"  > Меньше символов<i  data-toggle="tooltip" style="cursor:pointer" data-placement="top" title="Как можно меньше цифр и спецсимволов">
						  <i  class="fa fa-question-circle"></i>
						</i>
							</div>
						</input>		
				</div>
				<div class="height_options">
					  <form method="post" id="height_form" action="#">
				       <center style="margin-top:16px;"><span class="opts_headlines" >Длинна пароля:</span> </span><input class="opts_headlines" type="text" readonly  id="height_opt" name="length" value="14"></center>
				  		</form>
				  		<br>
				  		<div class="button_2">
				  		<button  id="btn_refresh_2" onclick="$('#btn_copy, #btn_copy_2').removeAttr('disabled');" title="Сгенерировать новый пароль"><i  id="icon_refresh_2" class="fas fa-sync-alt fa-2x" style=""></i></button>
				  		<button id="height_btn_up" title="Увеличить длинну пароля"><i class="fas fa-chevron-up fa-2x"></i></button>
				  		<button class="copy" id="btn_copy_2" disabled title="Скопировать пароль в буфер обмена" data-clipboard-action="copy" disabled data-clipboard-target="#password"><i class="fas fa-clone fa-2x" aria-hidden="true" ></i></button>
				  		<button id="height_btn_down" title="Уменьшить длинну пароля"><i class="fas fa-chevron-down fa-2x"></i></button>
				  	</div>
				</div>
				<script>
				$('#height_btn_up').click(function(){
					var count = parseInt($('#height_opt').val(), 10);
					if (count >= 30){
							return
					}
					$('#height_opt').val(count + 1);
					$("#slider").slider( "value", count + 1 );
				});
				$('#height_btn_down').click(function(){
					var count = parseInt($('#height_opt').val(), 10);
					if (count <= 12){
							return
					}
					$('#height_opt').val(count - 1);
					$("#slider").slider( "value", count - 1 );
				});
				</script>
			</div>
			</div>
		<hr>
		</div>
		</div>
		<script>
		$("#reset").click(function(){
			$("#item_opt_sim").removeAttr("checked");
			$("#item_opt_light").removeAttr("checked");
			$('.w_option_left input').not(this).prop('checked', false);
			$("#word_rand_l").prop("checked", true);
			$('.w_option_right input').not(this).prop('checked', false);
			$("#word_rand_r").prop("checked", true);
			setWordCombination();
			$("#slider").slider( "value", 14 );
			$("#height_opt").val( 14 );
			localStorage.clear();
		})
		</script>
    	<script>
		/* Обработчик клика на чекбоксах */
		$('input').on('input', function() {
		  let aChecked = [];
		  $('input[type="checkbox"]:checked').each(function() { aChecked.push($(this).getPath()); });
		  localStorage.setItem('CheckboxChecked', aChecked.join(';'));
		});




		/* Установка состояний чекбоксов, после загрузки страницы */
		$(document).ready(function() {
		  if (localStorage.getItem('CheckboxChecked')) {
		    let aChecked = localStorage.getItem('CheckboxChecked').split(';');
		    $('input[type="checkbox"]').prop('checked', false);
		    aChecked.forEach(function(str) { $(str).prop('checked', true); });
		  }
		  if (localStorage.getItem('PasswordLength')) {
		    $('#height_opt').val(localStorage.getItem('PasswordLength'));
		    $('#slider').slider("value",localStorage.getItem('PasswordLength'));
		  }
		  setWordCombination()
		});

		/************************************************************
		 * Функция для jQ, возвращающая уникальный селектор элемента *
		 * Источник: https://stackoverflow.com/a/26762730/10179415   *
		 ************************************************************/
		jQuery.fn.extend({
		  getPath: function() {
		    let pathes = [];
		    this.each(function(index, element) {
		      let path, $node = jQuery(element);
		      while ($node.length) {
		        let realNode = $node.get(0), name = realNode.localName;
		        if (!name) { break; }
		        name = name.toLowerCase();
		        let parent = $node.parent();
		        let sameTagSiblings = parent.children(name);
		        if (sameTagSiblings.length > 1) {
		          let allSiblings = parent.children();
		          let index = allSiblings.index(realNode) + 1;
		          if (index > 0) { name += ':nth-child(' + index + ')'; }
		        }
		        path = name + (path ? '>' + path : '');
		        $node = parent;
		      }
		      pathes.push(path);
		    });
		    return pathes.join(',');
		  }
		});
    	</script>
		<script>
			$(".w_option_left").prop("checked")
		</script>
		<script>
		/*подключение подсказки*/
		$(function () {
			  $('#btn_copy, #btn_copy_2').click(function(){
			    $('.popover-control').popover('toggle');
			  })
			})
			$(function () {	
			  $('[data-toggle="tooltip"]').tooltip()
			})
		/*подключение подсказки*/
		</script>
		<script>
		/*блок кнопки enter*/
		$(document).ready(function() {
		  $('#height_form').keydown(function(e) {
		 if(e.keyCode === 13) {
		  $("#height_opt").click();
		 }
		  });
		});
		    $(document).keypress(
		    function(event){
		     if (event.which == '13') {
		        event.preventDefault();
		      }
		});
    </script>

		<script>
		setWordCombination();

		/*<--1 чекбокс-->*/
		$(".w_option_left input").on("click", function() {
		  $('.w_option_left input').not(this).prop('checked', false);
		  $(this).prop("checked", true);
		  setWordCombination();
		});

		$(".w_option_right input").on("click", function() {
		  $('.w_option_right input').not(this).prop('checked', false);
		  $(this).prop("checked", true);
		  setWordCombination();
		});
		</script>
		<script src="js/clickboard.js/clipboard.min.js" ></script>
		<script>
			    /*<--подключение clickboard.js-->*/
		var clipboard = new ClipboardJS('.copy');
		clipboard.on('success', function(e) {
	    console.log(e);
		 });
		clipboard.on('error', function(e) {
		 console.log(e);
		 });
				/*<--подключение clickboard.js-->*/
		</script>
		<script>
		var _browser = navigator.userAgent.search(/MSIE/) > 0 || navigator.userAgent.search(/NET CLR /) > 0 || navigator.userAgent.search(/Edge/) > 0;
		</script>
		<script type="text/javascript">
		/*<--отправка параметров на сервер-->*/
		$( document ).ready(function() {
		  $("#btn_refresh, #btn_refresh_2").click(function(){
		          $('#btn_refresh').prop('disabled', true);
		          $('#btn_refresh_2').prop('disabled', true);
		          $('#btn_refresh').attr('style', 'cursor:default');
		          $('#btn_refresh_2').attr('style', 'cursor:default');
		          if(!_browser){
		  		$('#icon_refresh').attr("class",'fas fa-spinner fa-pulse fa-2x');
		  		$('#icon_refresh_2').attr("class",'fas fa-spinner fa-pulse fa-2x');
		          }
		  		$('#icon_refresh').attr("style",'cursor:default');
		  		$('#icon_refresh_2').attr("style",'cursor:default');
				  var l_dict = $(".w_option_left input:checked").val();
		     	  var r_dict = $(".w_option_right input:checked").val();
		          var length = $("#height_form").serialize();
		          var l_password = false;
		          var sim_symb = false;
		        if ($('#item_opt_light').prop('checked')){
					  	l_password = 'light_password_checked="on"';
					}
				if($('#item_opt_sim').prop('checked')) {
		  				sim_symb = 'exclude_sim_symbols="on"';
		  			}

		        var data = l_dict+"&"+r_dict+"&"+length+"&"+l_password+"&"+sim_symb;
		          console.log(data);
		      $.ajax({
		        url: 'generator/generator.php',
		        type: "POST",
		        data:data ,
		        success: function(data) {
		          console.log(data);
		      updatePasswordAtPage();
		      $('#icon_refresh').attr("style",'cursor:pointer');
		      $('#icon_refresh_2').attr("style",'cursor:pointer');
		      if(!_browser){
		      $('#icon_refresh').attr("class",'fas fa-sync-alt fa-2x');
		      $('#icon_refresh_2').attr("class",'fas fa-sync-alt fa-2x');
		      }
		      $('#btn_refresh').attr('style', 'cursor:pointer');
		      $('#btn_refresh_2').attr('style', 'cursor:pointer');
		        }
		      });
		      return false; 
		  });
		});
		/*<--отправка параметров на сервер-->*/
		</script>
<!--
	var a;
if (navigator.userAgent.search(/Safari/) > 0) {a = 'Safari'};
if (navigator.userAgent.search(/Firefox/) > 0) {a = 'MozillaFirefox'};
if (navigator.userAgent.search(/MSIE/) > 0 || navigator.userAgent.search(/NET CLR /) > 0) {a = 'Internet Explorer'};
if (navigator.userAgent.search(/Chrome/) > 0) {a = 'Google Chrome'};
if (navigator.userAgent.search(/YaBrowser/) > 0) {a = 'Яндекс браузер'};
if (navigator.userAgent.search(/OPR/) > 0) {a = 'Opera'};
if (navigator.userAgent.search(/Konqueror/) > 0) {a = 'Konqueror'};
if (navigator.userAgent.search(/Iceweasel/) > 0) {a = 'Debian Iceweasel'};
if (navigator.userAgent.search(/SeaMonkey/) > 0) {a = 'SeaMonkey'};
if (navigator.userAgent.search(/Edge/) > 0) {a = 'Microsoft Edge'};
document.write(a); // В переменной a будет название браузера
-->

	</body>
</html>
